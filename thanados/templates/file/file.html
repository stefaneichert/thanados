{% extends "layout.html" %}
{% block content %}
    <link href="/static/css/file.css" rel="stylesheet">

    {% if mimetype == 'img' %}
        <script src="/static/vendor/node_modules/mirador/dist/mirador.min.js"></script>
        <main>
            <div id="fileContainer" style="height: calc(100vh - 56px)"></div>
        </main>
    {% else %}
        <button id="infoBtn" class="infoCircle">
            <div class="spinner-grow" title="loading info" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </button>
        <div id="metadataInfo" class="metadata-info">
            <div id="attribution"></div>
            <button class="infoCircle">Close</button>
        </div>
    {% endif %}

    {% if mimetype == 'pdf' %}
        <main>
            <div id="fileContainer" style="height: calc(100vh - 56px)">
                <object data="/static/images/entities/{{ filename|safe }}" type="application/pdf" width="100%"
                        height="100%">
                    <p>This PDF cannot be displayed on your device. You can download it <a
                            href="{{ downloadUrl|safe }}">here</a></p>
                </object>
            </div>

        </main>
    {% endif %}
    {% if mimetype == 'threedee' %}
        <main>
            <div id="fileContainer" style="height: calc(100vh - 56px)">
                <model-viewer
                        class="fullscreen-model"
                        alt="3d-Model"
                        src="{{ downloadUrl }}"
                        shadow-intensity="1"
                        loading="lazy"
                        camera-controls
                ></model-viewer>
            </div>

        </main>
    {% endif %}
     {% if mimetype == 'vector' %}
         <script src="/static/vendor/svg-pan-zoom-master/dist/svg-pan-zoom.min.js"></script>
        <main>
            <div id="fileContainer" style="height: calc(100vh - 56px)">
                <object id="currentSvg" type="image/svg+xml" data="/static/images/entities/{{ filename|safe }}" style="width: 100%; height: 100%;"><p>This SVG cannot be displayed on your device. You can download it <a
                            href="{{ downloadUrl|safe }}">here</a></p></object>
            </div>

        </main>
    {% endif %}


    <script>filename = "{{filename|safe}}"</script>
    <script>fileid = "{{id}}"</script>
    <script>mimetype = "{{mimetype|safe}}"</script>
    <script>img_manifest = "{{manifest|safe}}"</script>
    <script>downloadUrl = "{{downloadUrl|safe}}"</script>
    <script src="/static/js/file.js"></script>

{% endblock %}
