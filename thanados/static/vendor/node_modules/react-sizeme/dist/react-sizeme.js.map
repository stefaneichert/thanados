{"version":3,"file":"react-sizeme.js","sources":["../src/resize-detector.js","../src/with-size.js","../src/component.js","../src/index.js"],"sourcesContent":["import createResizeDetector from 'element-resize-detector'\n\nconst instances = {}\n\n// Lazily require to not cause bug\n// https://github.com/ctrlplusb/react-sizeme/issues/6\nfunction resizeDetector(strategy = 'scroll') {\n  if (!instances[strategy]) {\n    instances[strategy] = createResizeDetector({\n      strategy,\n    })\n  }\n\n  return instances[strategy]\n}\n\nexport default resizeDetector\n","/* eslint-disable react/no-multi-comp */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/require-default-props */\n/* eslint-disable react/no-find-dom-node */\n\nimport React, { Children, Component } from 'react'\nimport ReactDOM from 'react-dom'\nimport invariant from 'invariant'\nimport { debounce, throttle } from 'throttle-debounce'\nimport resizeDetector from './resize-detector'\n\nconst errMsg =\n  'react-sizeme: an error occurred whilst stopping to listen to node size changes'\n\nconst defaultConfig = {\n  monitorWidth: true,\n  monitorHeight: false,\n  monitorPosition: false,\n  refreshRate: 16,\n  refreshMode: 'throttle',\n  noPlaceholder: false,\n  resizeDetectorStrategy: 'scroll',\n}\n\nfunction getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component'\n}\n\n/**\n * This is a utility wrapper component that will allow our higher order\n * component to get a ref handle on our wrapped components html.\n * @see https://gist.github.com/jimfb/32b587ee6177665fb4cf\n */\nclass ReferenceWrapper extends Component {\n  static displayName = 'SizeMeReferenceWrapper'\n\n  render() {\n    return Children.only(this.props.children)\n  }\n}\n\nfunction Placeholder({ className, style }) {\n  // Lets create the props for the temp element.\n  const phProps = {}\n\n  // We will use any provided className/style or else make the temp\n  // container take the full available space.\n  if (!className && !style) {\n    phProps.style = { width: '100%', height: '100%' }\n  } else {\n    if (className) {\n      phProps.className = className\n    }\n    if (style) {\n      phProps.style = style\n    }\n  }\n\n  return <div {...phProps} />\n}\nPlaceholder.displayName = 'SizeMePlaceholder'\n\n/**\n * As we need to maintain a ref on the root node that is rendered within our\n * SizeMe component we need to wrap our entire render in a sub component.\n * Without this, we lose the DOM ref after the placeholder is removed from\n * the render and the actual component is rendered.\n * It took me forever to figure this out, so tread extra careful on this one!\n */\nconst renderWrapper = WrappedComponent => {\n  function SizeMeRenderer(props) {\n    const {\n      explicitRef,\n      className,\n      style,\n      size,\n      disablePlaceholder,\n      onSize,\n      ...restProps\n    } = props\n\n    const noSizeData =\n      size == null ||\n      (size.width == null && size.height == null && size.position == null)\n\n    const renderPlaceholder = noSizeData && !disablePlaceholder\n\n    const renderProps = {\n      className,\n      style,\n    }\n\n    if (size != null) {\n      renderProps.size = size\n    }\n\n    const toRender = renderPlaceholder ? (\n      <Placeholder className={className} style={style} />\n    ) : (\n      <WrappedComponent {...renderProps} {...restProps} />\n    )\n\n    return <ReferenceWrapper ref={explicitRef}>{toRender}</ReferenceWrapper>\n  }\n\n  SizeMeRenderer.displayName = `SizeMeRenderer(${getDisplayName(\n    WrappedComponent,\n  )})`\n\n  return SizeMeRenderer\n}\n\n/**\n * :: config -> Component -> WrappedComponent\n *\n * Higher order component that allows the wrapped component to become aware\n * of it's size, by receiving it as an object within it's props.\n *\n * @param  monitorWidth\n *   Default true, whether changes in the element's width should be monitored,\n *   causing a size property to be broadcast.\n * @param  monitorHeight\n *   Default false, whether changes in the element's height should be monitored,\n *   causing a size property to be broadcast.\n *\n * @return The wrapped component.\n */\nfunction withSize(config = defaultConfig) {\n  const {\n    monitorWidth = defaultConfig.monitorWidth,\n    monitorHeight = defaultConfig.monitorHeight,\n    monitorPosition = defaultConfig.monitorPosition,\n    refreshRate = defaultConfig.refreshRate,\n    refreshMode = defaultConfig.refreshMode,\n    noPlaceholder = defaultConfig.noPlaceholder,\n    resizeDetectorStrategy = defaultConfig.resizeDetectorStrategy,\n  } = config\n\n  invariant(\n    monitorWidth || monitorHeight || monitorPosition,\n    'You have to monitor at least one of the width, height, or position when using \"sizeMe\"',\n  )\n\n  invariant(\n    refreshRate >= 16,\n    \"It is highly recommended that you don't put your refreshRate lower than \" +\n      '16 as this may cause layout thrashing.',\n  )\n\n  invariant(\n    refreshMode === 'throttle' || refreshMode === 'debounce',\n    'The refreshMode should have a value of \"throttle\" or \"debounce\"',\n  )\n\n  const refreshDelayStrategy = refreshMode === 'throttle' ? throttle : debounce\n\n  return function WrapComponent(WrappedComponent) {\n    const SizeMeRenderWrapper = renderWrapper(WrappedComponent)\n\n    class SizeAwareComponent extends React.Component {\n      static displayName = `SizeMe(${getDisplayName(WrappedComponent)})`\n\n      domEl = null\n\n      state = {\n        width: undefined,\n        height: undefined,\n        position: undefined,\n      }\n\n      componentDidMount() {\n        this.detector = resizeDetector(resizeDetectorStrategy)\n        this.determineStrategy(this.props)\n        this.handleDOMNode()\n      }\n\n      componentDidUpdate() {\n        this.determineStrategy(this.props)\n        this.handleDOMNode()\n      }\n\n      componentWillUnmount() {\n        // Change our size checker to a noop just in case we have some\n        // late running events.\n        this.hasSizeChanged = () => undefined\n        this.checkIfSizeChanged = () => undefined\n        this.uninstall()\n      }\n\n      uninstall = () => {\n        if (this.domEl) {\n          try {\n            this.detector.uninstall(this.domEl)\n          } catch (err) {\n            // eslint-disable-next-line no-console\n            console.warn(errMsg)\n          }\n          this.domEl = null\n        }\n      }\n\n      determineStrategy = props => {\n        if (props.onSize) {\n          if (!this.callbackState) {\n            this.callbackState = {\n              ...this.state,\n            }\n          }\n          this.strategy = 'callback'\n        } else {\n          this.strategy = 'render'\n        }\n      }\n\n      strategisedSetState = state => {\n        if (this.strategy === 'callback') {\n          this.callbackState = state\n          this.props.onSize(state)\n        }\n        this.setState(state)\n      }\n\n      strategisedGetState = () =>\n        this.strategy === 'callback' ? this.callbackState : this.state\n\n      handleDOMNode() {\n        const found = this.element && ReactDOM.findDOMNode(this.element)\n\n        if (!found) {\n          // If we previously had a dom node then we need to ensure that\n          // we remove any existing listeners to avoid memory leaks.\n          this.uninstall()\n          return\n        }\n\n        if (!this.domEl) {\n          this.domEl = found\n          this.detector.listenTo(this.domEl, this.checkIfSizeChanged)\n        } else if (\n          (this.domEl.isSameNode && !this.domEl.isSameNode(found)) ||\n          this.domEl !== found\n        ) {\n          this.uninstall()\n          this.domEl = found\n          this.detector.listenTo(this.domEl, this.checkIfSizeChanged)\n        } else {\n          // Do nothing 👍\n        }\n      }\n\n      refCallback = element => {\n        this.element = element\n      }\n\n      hasSizeChanged = (current, next) => {\n        const c = current\n        const n = next\n        const cp = c.position || {}\n        const np = n.position || {}\n\n        return (\n          (monitorWidth && c.width !== n.width) ||\n          (monitorHeight && c.height !== n.height) ||\n          (monitorPosition &&\n            (cp.top !== np.top ||\n              cp.left !== np.left ||\n              cp.bottom !== np.bottom ||\n              cp.right !== np.right))\n        )\n      }\n\n      checkIfSizeChanged = refreshDelayStrategy(refreshRate, el => {\n        const {\n          width,\n          height,\n          right,\n          left,\n          top,\n          bottom,\n        } = el.getBoundingClientRect()\n\n        const next = {\n          width: monitorWidth ? width : null,\n          height: monitorHeight ? height : null,\n          position: monitorPosition ? { right, left, top, bottom } : null,\n        }\n\n        if (this.hasSizeChanged(this.strategisedGetState(), next)) {\n          this.strategisedSetState(next)\n        }\n      })\n\n      render() {\n        const disablePlaceholder =\n          withSize.enableSSRBehaviour ||\n          withSize.noPlaceholders ||\n          noPlaceholder ||\n          this.strategy === 'callback'\n\n        const size = { ...this.state }\n\n        return (\n          <SizeMeRenderWrapper\n            explicitRef={this.refCallback}\n            size={this.strategy === 'callback' ? null : size}\n            disablePlaceholder={disablePlaceholder}\n            {...this.props}\n          />\n        )\n      }\n    }\n\n    SizeAwareComponent.WrappedComponent = WrappedComponent\n\n    return SizeAwareComponent\n  }\n}\n\n/**\n * Allow SizeMe to run within SSR environments.  This is a \"global\" behaviour\n * flag that should be set within the initialisation phase of your application.\n *\n * Warning: don't set this flag unless you need to as using it may cause\n * extra render cycles to happen within your components depending on the logic\n * contained within them around the usage of the `size` data.\n *\n * DEPRECATED: Please use the global noPlaceholders\n */\nwithSize.enableSSRBehaviour = false\n\n/**\n * Global configuration allowing to disable placeholder rendering for all\n * sizeMe components.\n */\nwithSize.noPlaceholders = false\n\nexport default withSize\n","/* eslint-disable react/prop-types */\n\nimport React, { Component } from 'react'\nimport isShallowEqual from 'shallowequal'\nimport withSize from './with-size'\n\nexport default class SizeMe extends Component {\n  static defaultProps = {\n    children: undefined,\n    render: undefined,\n  }\n\n  constructor(props) {\n    super(props)\n    const { children, render, ...sizeMeConfig } = props\n    this.createComponent(sizeMeConfig)\n    this.state = {\n      size: {\n        width: undefined,\n        height: undefined,\n      },\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      children: prevChildren,\n      render: prevRender,\n      ...currentSizeMeConfig\n    } = this.props\n    const {\n      children: nextChildren,\n      render: nextRender,\n      ...prevSizeMeConfig\n    } = prevProps\n    if (!isShallowEqual(currentSizeMeConfig, prevSizeMeConfig)) {\n      this.createComponent(currentSizeMeConfig)\n    }\n  }\n\n  createComponent = config => {\n    this.SizeAware = withSize(config)(({ children }) => children)\n  }\n\n  onSize = size => this.setState({ size })\n\n  render() {\n    const { SizeAware } = this\n    const render = this.props.children || this.props.render\n    return (\n      <SizeAware onSize={this.onSize}>\n        {render({ size: this.state.size })}\n      </SizeAware>\n    )\n  }\n}\n","import withSize from './with-size'\nimport SizeMe from './component'\n\nwithSize.SizeMe = SizeMe\nwithSize.withSize = withSize\n\nexport default withSize\n"],"names":["instances","resizeDetector","strategy","createResizeDetector","errMsg","defaultConfig","monitorWidth","monitorHeight","monitorPosition","refreshRate","refreshMode","noPlaceholder","resizeDetectorStrategy","getDisplayName","WrappedComponent","displayName","name","ReferenceWrapper","Children","only","props","children","Component","Placeholder","className","style","phProps","width","height","React","renderWrapper","SizeMeRenderer","explicitRef","size","disablePlaceholder","onSize","restProps","noSizeData","position","renderPlaceholder","renderProps","toRender","withSize","config","invariant","refreshDelayStrategy","throttle","debounce","WrapComponent","SizeMeRenderWrapper","SizeAwareComponent","undefined","domEl","detector","uninstall","err","console","warn","callbackState","state","setState","element","current","next","c","n","cp","np","top","left","bottom","right","el","getBoundingClientRect","hasSizeChanged","strategisedGetState","strategisedSetState","determineStrategy","handleDOMNode","checkIfSizeChanged","found","ReactDOM","findDOMNode","listenTo","isSameNode","enableSSRBehaviour","noPlaceholders","refCallback","SizeMe","SizeAware","render","sizeMeConfig","createComponent","prevProps","prevChildren","prevRender","currentSizeMeConfig","nextChildren","nextRender","prevSizeMeConfig","isShallowEqual"],"mappings":"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"}