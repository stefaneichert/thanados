{"version":3,"file":"vis-util.js","sources":["../../src/deep-object-assign.ts","../../src/random/alea.ts","../../src/util.ts"],"sourcesContent":["/**\n * Use this symbol to delete properies in deepObjectAssign.\n */\nexport const DELETE = Symbol(\"DELETE\");\n\n/**\n * Turns `undefined` into `undefined | typeof DELETE` and makes everything\n * partial. Intended to be used with `deepObjectAssign`.\n */\nexport type Assignable<T> = T extends undefined\n  ?\n      | (T extends Function\n          ? T\n          : T extends object\n          ? { [Key in keyof T]?: Assignable<T[Key]> | undefined }\n          : T)\n      | typeof DELETE\n  : T extends Function\n  ? T | undefined\n  : T extends object\n  ? { [Key in keyof T]?: Assignable<T[Key]> | undefined }\n  : T | undefined;\n\n/**\n * Pure version of deepObjectAssign, it doesn't modify any of it's arguments.\n *\n * @param base - The base object that fullfils the whole interface T.\n * @param updates - Updates that may change or delete props.\n *\n * @returns A brand new instance with all the supplied objects deeply merged.\n */\nexport function pureDeepObjectAssign<T>(\n  base: T,\n  ...updates: Assignable<T>[]\n): T {\n  return deepObjectAssign({} as any, base, ...updates);\n}\n\n/**\n * Deep version of object assign with additional deleting by the DELETE symbol.\n *\n * @param target - The object that will be augmented using the sources.\n * @param sources - Objects to be deeply merged into the target.\n *\n * @returns The target (same instance).\n */\nexport function deepObjectAssign<T>(target: T, ...sources: Assignable<T>[]): T;\n/**\n * Deep version of object assign with additional deleting by the DELETE symbol.\n *\n * @param values - Objects to be deeply merged.\n *\n * @returns The first object from values.\n */\nexport function deepObjectAssign(...values: readonly any[]): any {\n  const merged = deepObjectAssignNonentry(...values);\n  stripDelete(merged);\n  return merged;\n}\n\n/**\n * Deep version of object assign with additional deleting by the DELETE symbol.\n *\n * @remarks\n * This doesn't strip the DELETE symbols so they may end up in the final object.\n *\n * @param values - Objects to be deeply merged.\n *\n * @returns The first object from values.\n */\nfunction deepObjectAssignNonentry(...values: readonly any[]): any {\n  if (values.length < 2) {\n    return values[0];\n  } else if (values.length > 2) {\n    return deepObjectAssignNonentry(\n      deepObjectAssign(values[0], values[1]),\n      ...values.slice(2)\n    );\n  }\n\n  const a = values[0];\n  const b = values[1];\n\n  for (const prop of Reflect.ownKeys(b)) {\n    if (!Object.prototype.propertyIsEnumerable.call(b, prop)) {\n      // Ignore nonenumerable props, Object.assign() would do the same.\n    } else if (b[prop] === DELETE) {\n      delete a[prop];\n    } else if (\n      a[prop] !== null &&\n      b[prop] !== null &&\n      typeof a[prop] === \"object\" &&\n      typeof b[prop] === \"object\" &&\n      !Array.isArray(a[prop]) &&\n      !Array.isArray(b[prop])\n    ) {\n      a[prop] = deepObjectAssignNonentry(a[prop], b[prop]);\n    } else {\n      a[prop] = clone(b[prop]);\n    }\n  }\n\n  return a;\n}\n\n/**\n * Deep clone given object or array. In case of primitive simply return.\n *\n * @param a - Anything.\n *\n * @returns Deep cloned object/array or unchanged a.\n */\nfunction clone(a: any): any {\n  if (Array.isArray(a)) {\n    return a.map((value: any): any => clone(value));\n  } else if (typeof a === \"object\" && a !== null) {\n    return deepObjectAssignNonentry({}, a);\n  } else {\n    return a;\n  }\n}\n\n/**\n * Strip DELETE from given object.\n *\n * @param a - Object which may contain DELETE but won't after this is executed.\n */\nfunction stripDelete(a: any): void {\n  for (const prop of Object.keys(a)) {\n    if (a[prop] === DELETE) {\n      delete a[prop];\n    } else if (typeof a[prop] === \"object\" && a[prop] !== null) {\n      stripDelete(a[prop]);\n    }\n  }\n}\n","/**\n * Seedable, fast and reasonably good (not crypto but more than okay for our\n * needs) random number generator.\n *\n * @remarks\n * Adapted from {@link https://web.archive.org/web/20110429100736/http://baagoe.com:80/en/RandomMusings/javascript}.\n * Original algorithm created by Johannes Baagøe \\<baagoe\\@baagoe.com\\> in 2010.\n */\n\n/**\n * Random number generator.\n */\nexport interface RNG {\n  /** Returns \\<0, 1). Faster than [[fract53]]. */\n  (): number;\n  /** Returns \\<0, 1). Provides more precise data. */\n  fract53(): number;\n  /** Returns \\<0, 2^32). */\n  uint32(): number;\n\n  /** The algorithm gehind this instance. */\n  algorithm: string;\n  /** The seed used to seed this instance. */\n  seed: Mashable[];\n  /** The version of this instance. */\n  version: string;\n}\n\n/**\n * Create a seeded pseudo random generator based on Alea by Johannes Baagøe.\n *\n * @param seed - All supplied arguments will be used as a seed. In case nothing\n * is supplied the current time will be used to seed the generator.\n *\n * @returns A ready to use seeded generator.\n */\nexport function Alea(...seed: Mashable[]): RNG {\n  return AleaImplementation(seed.length ? seed : [Date.now()]);\n}\n\n/**\n * An implementation of [[Alea]] without user input validation.\n *\n * @param seed - The data that will be used to seed the generator.\n *\n * @returns A ready to use seeded generator.\n */\nfunction AleaImplementation(seed: Mashable[]): RNG {\n  let [s0, s1, s2] = mashSeed(seed);\n  let c = 1;\n\n  const random: RNG = (): number => {\n    const t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32\n    s0 = s1;\n    s1 = s2;\n    return (s2 = t - (c = t | 0));\n  };\n\n  random.uint32 = (): number => random() * 0x100000000; // 2^32\n\n  random.fract53 = (): number =>\n    random() + ((random() * 0x200000) | 0) * 1.1102230246251565e-16; // 2^-53\n\n  random.algorithm = \"Alea\";\n  random.seed = seed;\n  random.version = \"0.9\";\n\n  return random;\n}\n\n/**\n * Turn arbitrary data into values [[AleaImplementation]] can use to generate\n * random numbers.\n *\n * @param seed - Arbitrary data that will be used as the seed.\n *\n * @returns Three numbers to use as initial values for [[AleaImplementation]].\n */\nfunction mashSeed(...seed: Mashable[]): [number, number, number] {\n  const mash = Mash();\n\n  let s0 = mash(\" \");\n  let s1 = mash(\" \");\n  let s2 = mash(\" \");\n\n  for (let i = 0; i < seed.length; i++) {\n    s0 -= mash(seed[i]);\n    if (s0 < 0) {\n      s0 += 1;\n    }\n    s1 -= mash(seed[i]);\n    if (s1 < 0) {\n      s1 += 1;\n    }\n    s2 -= mash(seed[i]);\n    if (s2 < 0) {\n      s2 += 1;\n    }\n  }\n\n  return [s0, s1, s2];\n}\n\n/**\n * Values of these types can be used as a seed.\n */\nexport type Mashable = number | string | boolean | object | bigint;\n\n/**\n * Create a new mash function.\n *\n * @returns A nonpure function that takes arbitrary [[Mashable]] data and turns\n * them into numbers.\n */\nfunction Mash(): (data: Mashable) => number {\n  let n = 0xefc8249d;\n\n  return function (data): number {\n    const string = data.toString();\n    for (let i = 0; i < string.length; i++) {\n      n += string.charCodeAt(i);\n      let h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n}\n","// utility functions\n\n// parse ASP.Net Date pattern,\n// for example '/Date(1198908717056)/' or '/Date(1198908717056-0700)/'\n// code from http://momentjs.com/\nconst ASPDateRegex = /^\\/?Date\\((-?\\d+)/i;\n\n// Color REs\nconst fullHexRE = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\nconst shortHexRE = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\nconst rgbRE = /^rgb\\( *(1?\\d{1,2}|2[0-4]\\d|25[0-5]) *, *(1?\\d{1,2}|2[0-4]\\d|25[0-5]) *, *(1?\\d{1,2}|2[0-4]\\d|25[0-5]) *\\)$/i;\nconst rgbaRE = /^rgba\\( *(1?\\d{1,2}|2[0-4]\\d|25[0-5]) *, *(1?\\d{1,2}|2[0-4]\\d|25[0-5]) *, *(1?\\d{1,2}|2[0-4]\\d|25[0-5]) *, *([01]|0?\\.\\d+) *\\)$/i;\n\n/**\n * Hue, Saturation, Value.\n */\nexport interface HSV {\n  /**\n   * Hue \\<0, 1\\>.\n   */\n  h: number;\n  /**\n   * Saturation \\<0, 1\\>.\n   */\n  s: number;\n  /**\n   * Value \\<0, 1\\>.\n   */\n  v: number;\n}\n\n/**\n * Red, Green, Blue.\n */\nexport interface RGB {\n  /**\n   * Red \\<0, 255\\> integer.\n   */\n  r: number;\n  /**\n   * Green \\<0, 255\\> integer.\n   */\n  g: number;\n  /**\n   * Blue \\<0, 255\\> integer.\n   */\n  b: number;\n}\n\n/**\n * Red, Green, Blue, Alpha.\n */\nexport interface RGBA {\n  /**\n   * Red \\<0, 255\\> integer.\n   */\n  r: number;\n  /**\n   * Green \\<0, 255\\> integer.\n   */\n  g: number;\n  /**\n   * Blue \\<0, 255\\> integer.\n   */\n  b: number;\n  /**\n   * Alpha \\<0, 1\\>.\n   */\n  a: number;\n}\n\n/**\n * Test whether given object is a number.\n *\n * @param value - Input value of unknown type.\n *\n * @returns True if number, false otherwise.\n */\nexport function isNumber(value: unknown): value is number {\n  return value instanceof Number || typeof value === \"number\";\n}\n\n/**\n * Remove everything in the DOM object.\n *\n * @param DOMobject - Node whose child nodes will be recursively deleted.\n */\nexport function recursiveDOMDelete(DOMobject: Node | null | undefined): void {\n  if (DOMobject) {\n    while (DOMobject.hasChildNodes() === true) {\n      const child = DOMobject.firstChild;\n      if (child) {\n        recursiveDOMDelete(child);\n        DOMobject.removeChild(child);\n      }\n    }\n  }\n}\n\n/**\n * Test whether given object is a string.\n *\n * @param value - Input value of unknown type.\n *\n * @returns True if string, false otherwise.\n */\nexport function isString(value: unknown): value is string {\n  return value instanceof String || typeof value === \"string\";\n}\n\n/**\n * Test whether given object is a object (not primitive or null).\n *\n * @param value - Input value of unknown type.\n *\n * @returns True if not null object, false otherwise.\n */\nexport function isObject(value: unknown): value is object {\n  return typeof value === \"object\" && value !== null;\n}\n\n/**\n * Test whether given object is a Date, or a String containing a Date.\n *\n * @param value - Input value of unknown type.\n *\n * @returns True if Date instance or string date representation, false otherwise.\n */\nexport function isDate(value: unknown): value is Date | string {\n  if (value instanceof Date) {\n    return true;\n  } else if (isString(value)) {\n    // test whether this string contains a date\n    const match = ASPDateRegex.exec(value);\n    if (match) {\n      return true;\n    } else if (!isNaN(Date.parse(value))) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Copy property from b to a if property present in a.\n * If property in b explicitly set to null, delete it if `allowDeletion` set.\n *\n * Internal helper routine, should not be exported. Not added to `exports` for that reason.\n *\n * @param a - Target object.\n * @param b - Source object.\n * @param prop - Name of property to copy from b to a.\n * @param allowDeletion - If true, delete property in a if explicitly set to null in b.\n */\nfunction copyOrDelete(\n  a: any,\n  b: any,\n  prop: string,\n  allowDeletion: boolean\n): void {\n  let doDeletion = false;\n  if (allowDeletion === true) {\n    doDeletion = b[prop] === null && a[prop] !== undefined;\n  }\n\n  if (doDeletion) {\n    delete a[prop];\n  } else {\n    a[prop] = b[prop]; // Remember, this is a reference copy!\n  }\n}\n\n/**\n * Fill an object with a possibly partially defined other object.\n *\n * Only copies values for the properties already present in a.\n * That means an object is not created on a property if only the b object has it.\n *\n * @param a - The object that will have it's properties updated.\n * @param b - The object with property updates.\n * @param allowDeletion - If true, delete properties in a that are explicitly set to null in b.\n */\nexport function fillIfDefined<T extends object>(\n  a: T,\n  b: Partial<T>,\n  allowDeletion = false\n): void {\n  // NOTE: iteration of properties of a\n  // NOTE: prototype properties iterated over as well\n  for (const prop in a) {\n    if (b[prop] !== undefined) {\n      if (b[prop] === null || typeof b[prop] !== \"object\") {\n        // Note: typeof null === 'object'\n        copyOrDelete(a, b, prop, allowDeletion);\n      } else {\n        const aProp = a[prop];\n        const bProp = b[prop];\n        if (isObject(aProp) && isObject(bProp)) {\n          fillIfDefined(aProp, bProp, allowDeletion);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n *\n * @param target - The target object to copy to.\n * @param source - The source object from which to copy properties.\n *\n * @returns The target object.\n */\nexport const extend = Object.assign;\n\n/**\n * Extend object a with selected properties of object b or a series of objects.\n *\n * @remarks\n * Only properties with defined values are copied.\n *\n * @param props - Properties to be copied to a.\n * @param a - The target.\n * @param others - The sources.\n *\n * @returns Argument a.\n */\nexport function selectiveExtend(\n  props: string[],\n  a: any,\n  ...others: any[]\n): any {\n  if (!Array.isArray(props)) {\n    throw new Error(\"Array with property names expected as first argument\");\n  }\n\n  for (const other of others) {\n    for (let p = 0; p < props.length; p++) {\n      const prop = props[p];\n      if (other && Object.prototype.hasOwnProperty.call(other, prop)) {\n        a[prop] = other[prop];\n      }\n    }\n  }\n  return a;\n}\n\n/**\n * Extend object a with selected properties of object b.\n * Only properties with defined values are copied.\n *\n * @remarks\n * Previous version of this routine implied that multiple source objects could\n * be used; however, the implementation was **wrong**. Since multiple (\\>1)\n * sources weren't used anywhere in the `vis.js` code, this has been removed\n *\n * @param props - Names of first-level properties to copy over.\n * @param a - Target object.\n * @param b - Source object.\n * @param allowDeletion - If true, delete property in a if explicitly set to null in b.\n *\n * @returns Argument a.\n */\nexport function selectiveDeepExtend(\n  props: string[],\n  a: any,\n  b: any,\n  allowDeletion = false\n): any {\n  // TODO: add support for Arrays to deepExtend\n  if (Array.isArray(b)) {\n    throw new TypeError(\"Arrays are not supported by deepExtend\");\n  }\n\n  for (let p = 0; p < props.length; p++) {\n    const prop = props[p];\n    if (Object.prototype.hasOwnProperty.call(b, prop)) {\n      if (b[prop] && b[prop].constructor === Object) {\n        if (a[prop] === undefined) {\n          a[prop] = {};\n        }\n        if (a[prop].constructor === Object) {\n          deepExtend(a[prop], b[prop], false, allowDeletion);\n        } else {\n          copyOrDelete(a, b, prop, allowDeletion);\n        }\n      } else if (Array.isArray(b[prop])) {\n        throw new TypeError(\"Arrays are not supported by deepExtend\");\n      } else {\n        copyOrDelete(a, b, prop, allowDeletion);\n      }\n    }\n  }\n  return a;\n}\n\n/**\n * Extend object `a` with properties of object `b`, ignoring properties which\n * are explicitly specified to be excluded.\n *\n * @remarks\n * The properties of `b` are considered for copying. Properties which are\n * themselves objects are are also extended. Only properties with defined\n * values are copied.\n *\n * @param propsToExclude - Names of properties which should *not* be copied.\n * @param a - Object to extend.\n * @param b - Object to take properties from for extension.\n * @param allowDeletion - If true, delete properties in a that are explicitly\n * set to null in b.\n *\n * @returns Argument a.\n */\nexport function selectiveNotDeepExtend(\n  propsToExclude: string[],\n  a: any,\n  b: any,\n  allowDeletion = false\n): any {\n  // TODO: add support for Arrays to deepExtend\n  // NOTE: array properties have an else-below; apparently, there is a problem here.\n  if (Array.isArray(b)) {\n    throw new TypeError(\"Arrays are not supported by deepExtend\");\n  }\n\n  for (const prop in b) {\n    if (!Object.prototype.hasOwnProperty.call(b, prop)) {\n      continue;\n    } // Handle local properties only\n    if (propsToExclude.indexOf(prop) !== -1) {\n      continue;\n    } // In exclusion list, skip\n\n    if (b[prop] && b[prop].constructor === Object) {\n      if (a[prop] === undefined) {\n        a[prop] = {};\n      }\n      if (a[prop].constructor === Object) {\n        deepExtend(a[prop], b[prop]); // NOTE: allowDeletion not propagated!\n      } else {\n        copyOrDelete(a, b, prop, allowDeletion);\n      }\n    } else if (Array.isArray(b[prop])) {\n      a[prop] = [];\n      for (let i = 0; i < b[prop].length; i++) {\n        a[prop].push(b[prop][i]);\n      }\n    } else {\n      copyOrDelete(a, b, prop, allowDeletion);\n    }\n  }\n\n  return a;\n}\n\n/**\n * Deep extend an object a with the properties of object b.\n *\n * @param a - Target object.\n * @param b - Source object.\n * @param protoExtend - If true, the prototype values will also be extended.\n * (That is the options objects that inherit from others will also get the\n * inherited options).\n * @param allowDeletion - If true, the values of fields that are null will be deleted.\n *\n * @returns Argument a.\n */\nexport function deepExtend(\n  a: any,\n  b: any,\n  protoExtend = false,\n  allowDeletion = false\n): any {\n  for (const prop in b) {\n    if (Object.prototype.hasOwnProperty.call(b, prop) || protoExtend === true) {\n      if (\n        typeof b[prop] === \"object\" &&\n        b[prop] !== null &&\n        Object.getPrototypeOf(b[prop]) === Object.prototype\n      ) {\n        if (a[prop] === undefined) {\n          a[prop] = deepExtend({}, b[prop], protoExtend); // NOTE: allowDeletion not propagated!\n        } else if (\n          typeof a[prop] === \"object\" &&\n          a[prop] !== null &&\n          Object.getPrototypeOf(a[prop]) === Object.prototype\n        ) {\n          deepExtend(a[prop], b[prop], protoExtend); // NOTE: allowDeletion not propagated!\n        } else {\n          copyOrDelete(a, b, prop, allowDeletion);\n        }\n      } else if (Array.isArray(b[prop])) {\n        a[prop] = b[prop].slice();\n      } else {\n        copyOrDelete(a, b, prop, allowDeletion);\n      }\n    }\n  }\n  return a;\n}\n\n/**\n * Test whether all elements in two arrays are equal.\n *\n * @param a - First array.\n * @param b - Second array.\n *\n * @returns True if both arrays have the same length and same elements (1 = '1').\n */\nexport function equalArray(a: unknown[], b: unknown[]): boolean {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (let i = 0, len = a.length; i < len; i++) {\n    if (a[i] != b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Get the type of an object, for example exports.getType([]) returns 'Array'.\n *\n * @param object - Input value of unknown type.\n *\n * @returns Detected type.\n */\nexport function getType(object: unknown): string {\n  const type = typeof object;\n\n  if (type === \"object\") {\n    if (object === null) {\n      return \"null\";\n    }\n    if (object instanceof Boolean) {\n      return \"Boolean\";\n    }\n    if (object instanceof Number) {\n      return \"Number\";\n    }\n    if (object instanceof String) {\n      return \"String\";\n    }\n    if (Array.isArray(object)) {\n      return \"Array\";\n    }\n    if (object instanceof Date) {\n      return \"Date\";\n    }\n\n    return \"Object\";\n  }\n  if (type === \"number\") {\n    return \"Number\";\n  }\n  if (type === \"boolean\") {\n    return \"Boolean\";\n  }\n  if (type === \"string\") {\n    return \"String\";\n  }\n  if (type === undefined) {\n    return \"undefined\";\n  }\n\n  return type;\n}\n\nexport function copyAndExtendArray<T>(arr: ReadonlyArray<T>, newValue: T): T[];\nexport function copyAndExtendArray<A, V>(\n  arr: ReadonlyArray<A>,\n  newValue: V\n): (A | V)[];\n/**\n * Used to extend an array and copy it. This is used to propagate paths recursively.\n *\n * @param arr - First part.\n * @param newValue - The value to be aadded into the array.\n *\n * @returns A new array with all items from arr and newValue (which is last).\n */\nexport function copyAndExtendArray<A, V>(\n  arr: ReadonlyArray<A>,\n  newValue: V\n): (A | V)[] {\n  return [...arr, newValue];\n}\n\n/**\n * Used to extend an array and copy it. This is used to propagate paths recursively.\n *\n * @param arr - The array to be copied.\n *\n * @returns Shallow copy of arr.\n */\nexport function copyArray<T>(arr: ReadonlyArray<T>): T[] {\n  return arr.slice();\n}\n\n/**\n * Retrieve the absolute left value of a DOM element.\n *\n * @param elem - A dom element, for example a div.\n *\n * @returns The absolute left position of this element in the browser page.\n */\nexport function getAbsoluteLeft(elem: Element): number {\n  return elem.getBoundingClientRect().left;\n}\n\n/**\n * Retrieve the absolute right value of a DOM element.\n *\n * @param elem - A dom element, for example a div.\n *\n * @returns The absolute right position of this element in the browser page.\n */\nexport function getAbsoluteRight(elem: Element): number {\n  return elem.getBoundingClientRect().right;\n}\n\n/**\n * Retrieve the absolute top value of a DOM element.\n *\n * @param elem - A dom element, for example a div.\n *\n * @returns The absolute top position of this element in the browser page.\n */\nexport function getAbsoluteTop(elem: Element): number {\n  return elem.getBoundingClientRect().top;\n}\n\n/**\n * Add a className to the given elements style.\n *\n * @param elem - The element to which the classes will be added.\n * @param classNames - Space separated list of classes.\n */\nexport function addClassName(elem: Element, classNames: string): void {\n  let classes = elem.className.split(\" \");\n  const newClasses = classNames.split(\" \");\n  classes = classes.concat(\n    newClasses.filter(function (className): boolean {\n      return classes.indexOf(className) < 0;\n    })\n  );\n  elem.className = classes.join(\" \");\n}\n\n/**\n * Remove a className from the given elements style.\n *\n * @param elem - The element from which the classes will be removed.\n * @param classNames - Space separated list of classes.\n */\nexport function removeClassName(elem: Element, classNames: string): void {\n  let classes = elem.className.split(\" \");\n  const oldClasses = classNames.split(\" \");\n  classes = classes.filter(function (className): boolean {\n    return oldClasses.indexOf(className) < 0;\n  });\n  elem.className = classes.join(\" \");\n}\n\nexport function forEach<V>(\n  array: undefined | null | V[],\n  callback: (value: V, index: number, object: V[]) => void\n): void;\nexport function forEach<O extends object>(\n  object: undefined | null | O,\n  callback: <Key extends keyof O>(value: O[Key], key: Key, object: O) => void\n): void;\n/**\n * For each method for both arrays and objects.\n * In case of an array, the built-in Array.forEach() is applied (**No, it's not!**).\n * In case of an Object, the method loops over all properties of the object.\n *\n * @param object - An Object or Array to be iterated over.\n * @param callback - Array.forEach-like callback.\n */\nexport function forEach(object: any, callback: any): void {\n  if (Array.isArray(object)) {\n    // array\n    const len = object.length;\n    for (let i = 0; i < len; i++) {\n      callback(object[i], i, object);\n    }\n  } else {\n    // object\n    for (const key in object) {\n      if (Object.prototype.hasOwnProperty.call(object, key)) {\n        callback(object[key], key, object);\n      }\n    }\n  }\n}\n\n/**\n * Convert an object into an array: all objects properties are put into the array. The resulting array is unordered.\n *\n * @param o - Object that contains the properties and methods.\n *\n * @returns An array of unordered values.\n */\nexport const toArray = Object.values;\n\n/**\n * Update a property in an object.\n *\n * @param object - The object whose property will be updated.\n * @param key - Name of the property to be updated.\n * @param value - The new value to be assigned.\n *\n * @returns Whether the value was updated (true) or already strictly the same in the original object (false).\n */\nexport function updateProperty<K extends string, V>(\n  object: Record<K, V>,\n  key: K,\n  value: V\n): boolean {\n  if (object[key] !== value) {\n    object[key] = value;\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Throttle the given function to be only executed once per animation frame.\n *\n * @param fn - The original function.\n *\n * @returns The throttled function.\n */\nexport function throttle(fn: () => void): () => void {\n  let scheduled = false;\n\n  return (): void => {\n    if (!scheduled) {\n      scheduled = true;\n      requestAnimationFrame((): void => {\n        scheduled = false;\n        fn();\n      });\n    }\n  };\n}\n\n/**\n * Add and event listener. Works for all browsers.\n *\n * @param element - The element to bind the event listener to.\n * @param action - Same as Element.addEventListener(action, —, —).\n * @param listener - Same as Element.addEventListener(—, listener, —).\n * @param useCapture - Same as Element.addEventListener(—, —, useCapture).\n */\nexport function addEventListener<E extends Element>(\n  element: E,\n  action: Parameters<E[\"addEventListener\"]>[0],\n  listener: Parameters<E[\"addEventListener\"]>[1],\n  useCapture?: Parameters<E[\"addEventListener\"]>[2]\n): void {\n  if (element.addEventListener) {\n    if (useCapture === undefined) {\n      useCapture = false;\n    }\n\n    if (\n      action === \"mousewheel\" &&\n      navigator.userAgent.indexOf(\"Firefox\") >= 0\n    ) {\n      action = \"DOMMouseScroll\"; // For Firefox\n    }\n\n    element.addEventListener(action, listener, useCapture);\n  } else {\n    // @TODO: IE types? Does anyone care?\n    (element as any).attachEvent(\"on\" + action, listener); // IE browsers\n  }\n}\n\n/**\n * Remove an event listener from an element.\n *\n * @param element - The element to bind the event listener to.\n * @param action - Same as Element.removeEventListener(action, —, —).\n * @param listener - Same as Element.removeEventListener(—, listener, —).\n * @param useCapture - Same as Element.removeEventListener(—, —, useCapture).\n */\nexport function removeEventListener<E extends Element>(\n  element: E,\n  action: Parameters<E[\"removeEventListener\"]>[0],\n  listener: Parameters<E[\"removeEventListener\"]>[1],\n  useCapture?: Parameters<E[\"removeEventListener\"]>[2]\n): void {\n  if (element.removeEventListener) {\n    // non-IE browsers\n    if (useCapture === undefined) {\n      useCapture = false;\n    }\n\n    if (\n      action === \"mousewheel\" &&\n      navigator.userAgent.indexOf(\"Firefox\") >= 0\n    ) {\n      action = \"DOMMouseScroll\"; // For Firefox\n    }\n\n    element.removeEventListener(action, listener, useCapture);\n  } else {\n    // @TODO: IE types? Does anyone care?\n    (element as any).detachEvent(\"on\" + action, listener); // IE browsers\n  }\n}\n\n/**\n * Cancels the event's default action if it is cancelable, without stopping further propagation of the event.\n *\n * @param event - The event whose default action should be prevented.\n */\nexport function preventDefault(event: Event | undefined): void {\n  if (!event) {\n    event = window.event;\n  }\n\n  if (!event) {\n    // No event, no work.\n  } else if (event.preventDefault) {\n    event.preventDefault(); // non-IE browsers\n  } else {\n    // @TODO: IE types? Does anyone care?\n    (event as any).returnValue = false; // IE browsers\n  }\n}\n\n/**\n * Get HTML element which is the target of the event.\n *\n * @param event - The event.\n *\n * @returns The element or null if not obtainable.\n */\nexport function getTarget(\n  event: Event | undefined = window.event\n): Element | null {\n  // code from http://www.quirksmode.org/js/events_properties.html\n  // @TODO: EventTarget can be almost anything, is it okay to return only Elements?\n\n  let target: null | EventTarget = null;\n  if (!event) {\n    // No event, no target.\n  } else if (event.target) {\n    target = event.target;\n  } else if (event.srcElement) {\n    target = event.srcElement;\n  }\n\n  if (!(target instanceof Element)) {\n    return null;\n  }\n\n  if (target.nodeType != null && target.nodeType == 3) {\n    // defeat Safari bug\n    target = target.parentNode;\n    if (!(target instanceof Element)) {\n      return null;\n    }\n  }\n\n  return target;\n}\n\n/**\n * Check if given element contains given parent somewhere in the DOM tree.\n *\n * @param element - The element to be tested.\n * @param parent - The ancestor (not necessarily parent) of the element.\n *\n * @returns True if parent is an ancestor of the element, false otherwise.\n */\nexport function hasParent(element: Element, parent: Element): boolean {\n  let elem: Node = element;\n\n  while (elem) {\n    if (elem === parent) {\n      return true;\n    } else if (elem.parentNode) {\n      elem = elem.parentNode;\n    } else {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nexport const option = {\n  /**\n   * Convert a value into a boolean.\n   *\n   * @param value - Value to be converted intoboolean, a function will be executed as `(() => unknown)`.\n   * @param defaultValue - If the value or the return value of the function == null then this will be returned.\n   *\n   * @returns Corresponding boolean value, if none then the default value, if none then null.\n   */\n  asBoolean(value: unknown, defaultValue?: boolean): boolean | null {\n    if (typeof value == \"function\") {\n      value = value();\n    }\n\n    if (value != null) {\n      return value != false;\n    }\n\n    return defaultValue || null;\n  },\n\n  /**\n   * Convert a value into a number.\n   *\n   * @param value - Value to be converted intonumber, a function will be executed as `(() => unknown)`.\n   * @param defaultValue - If the value or the return value of the function == null then this will be returned.\n   *\n   * @returns Corresponding **boxed** number value, if none then the default value, if none then null.\n   */\n  asNumber(value: unknown, defaultValue?: number): number | null {\n    if (typeof value == \"function\") {\n      value = value();\n    }\n\n    if (value != null) {\n      return Number(value) || defaultValue || null;\n    }\n\n    return defaultValue || null;\n  },\n\n  /**\n   * Convert a value into a string.\n   *\n   * @param value - Value to be converted intostring, a function will be executed as `(() => unknown)`.\n   * @param defaultValue - If the value or the return value of the function == null then this will be returned.\n   *\n   * @returns Corresponding **boxed** string value, if none then the default value, if none then null.\n   */\n  asString(value: unknown, defaultValue?: string): string | null {\n    if (typeof value == \"function\") {\n      value = value();\n    }\n\n    if (value != null) {\n      return String(value);\n    }\n\n    return defaultValue || null;\n  },\n\n  /**\n   * Convert a value into a size.\n   *\n   * @param value - Value to be converted intosize, a function will be executed as `(() => unknown)`.\n   * @param defaultValue - If the value or the return value of the function == null then this will be returned.\n   *\n   * @returns Corresponding string value (number + 'px'), if none then the default value, if none then null.\n   */\n  asSize(value: unknown, defaultValue?: string): string | null {\n    if (typeof value == \"function\") {\n      value = value();\n    }\n\n    if (isString(value)) {\n      return value;\n    } else if (isNumber(value)) {\n      return value + \"px\";\n    } else {\n      return defaultValue || null;\n    }\n  },\n\n  /**\n   * Convert a value into a DOM Element.\n   *\n   * @param value - Value to be converted into DOM Element, a function will be executed as `(() => unknown)`.\n   * @param defaultValue - If the value or the return value of the function == null then this will be returned.\n   *\n   * @returns The DOM Element, if none then the default value, if none then null.\n   */\n  asElement<T extends Node>(\n    value: T | (() => T | undefined) | undefined,\n    defaultValue: T\n  ): T | null {\n    if (typeof value == \"function\") {\n      value = value();\n    }\n\n    return value || defaultValue || null;\n  },\n};\n\n/**\n * Convert hex color string into RGB color object.\n *\n * @remarks\n * {@link http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb}\n *\n * @param hex - Hex color string (3 or 6 digits, with or without #).\n *\n * @returns RGB color object.\n */\nexport function hexToRGB(hex: string): RGB | null {\n  let result;\n  switch (hex.length) {\n    case 3:\n    case 4:\n      result = shortHexRE.exec(hex);\n      return result\n        ? {\n            r: parseInt(result[1] + result[1], 16),\n            g: parseInt(result[2] + result[2], 16),\n            b: parseInt(result[3] + result[3], 16),\n          }\n        : null;\n    case 6:\n    case 7:\n      result = fullHexRE.exec(hex);\n      return result\n        ? {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16),\n          }\n        : null;\n    default:\n      return null;\n  }\n}\n\n/**\n * This function takes string color in hex or RGB format and adds the opacity, RGBA is passed through unchanged.\n *\n * @param color - The color string (hex, RGB, RGBA).\n * @param opacity - The new opacity.\n *\n * @returns RGBA string, for example 'rgba(255, 0, 127, 0.3)'.\n */\nexport function overrideOpacity(color: string, opacity: number): string {\n  if (color.indexOf(\"rgba\") !== -1) {\n    return color;\n  } else if (color.indexOf(\"rgb\") !== -1) {\n    const rgb = color\n      .substr(color.indexOf(\"(\") + 1)\n      .replace(\")\", \"\")\n      .split(\",\");\n    return \"rgba(\" + rgb[0] + \",\" + rgb[1] + \",\" + rgb[2] + \",\" + opacity + \")\";\n  } else {\n    const rgb = hexToRGB(color);\n    if (rgb == null) {\n      return color;\n    } else {\n      return \"rgba(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \",\" + opacity + \")\";\n    }\n  }\n}\n\n/**\n * Convert RGB \\<0, 255\\> into hex color string.\n *\n * @param red - Red channel.\n * @param green - Green channel.\n * @param blue - Blue channel.\n *\n * @returns Hex color string (for example: '#0acdc0').\n */\nexport function RGBToHex(red: number, green: number, blue: number): string {\n  return (\n    \"#\" + ((1 << 24) + (red << 16) + (green << 8) + blue).toString(16).slice(1)\n  );\n}\n\nexport interface ColorObject {\n  background?: string;\n  border?: string;\n  hover?:\n    | string\n    | {\n        border?: string;\n        background?: string;\n      };\n  highlight?:\n    | string\n    | {\n        border?: string;\n        background?: string;\n      };\n}\nexport interface FullColorObject {\n  background: string;\n  border: string;\n  hover: {\n    border: string;\n    background: string;\n  };\n  highlight: {\n    border: string;\n    background: string;\n  };\n}\n\nexport function parseColor(inputColor: string): FullColorObject;\nexport function parseColor(inputColor: FullColorObject): FullColorObject;\nexport function parseColor(inputColor: ColorObject): ColorObject;\nexport function parseColor(\n  inputColor: ColorObject,\n  defaultColor: FullColorObject\n): FullColorObject;\n/**\n * Parse a color property into an object with border, background, and highlight colors.\n *\n * @param inputColor - Shorthand color string or input color object.\n * @param defaultColor - Full color object to fill in missing values in inputColor.\n *\n * @returns Color object.\n */\nexport function parseColor(\n  inputColor: ColorObject | string,\n  defaultColor?: FullColorObject\n): ColorObject | FullColorObject {\n  if (isString(inputColor)) {\n    let colorStr: string = inputColor;\n    if (isValidRGB(colorStr)) {\n      const rgb = colorStr\n        .substr(4)\n        .substr(0, colorStr.length - 5)\n        .split(\",\")\n        .map(function (value): number {\n          return parseInt(value);\n        });\n      colorStr = RGBToHex(rgb[0], rgb[1], rgb[2]);\n    }\n    if (isValidHex(colorStr) === true) {\n      const hsv = hexToHSV(colorStr);\n      const lighterColorHSV = {\n        h: hsv.h,\n        s: hsv.s * 0.8,\n        v: Math.min(1, hsv.v * 1.02),\n      };\n      const darkerColorHSV = {\n        h: hsv.h,\n        s: Math.min(1, hsv.s * 1.25),\n        v: hsv.v * 0.8,\n      };\n      const darkerColorHex = HSVToHex(\n        darkerColorHSV.h,\n        darkerColorHSV.s,\n        darkerColorHSV.v\n      );\n      const lighterColorHex = HSVToHex(\n        lighterColorHSV.h,\n        lighterColorHSV.s,\n        lighterColorHSV.v\n      );\n      return {\n        background: colorStr,\n        border: darkerColorHex,\n        highlight: {\n          background: lighterColorHex,\n          border: darkerColorHex,\n        },\n        hover: {\n          background: lighterColorHex,\n          border: darkerColorHex,\n        },\n      };\n    } else {\n      return {\n        background: colorStr,\n        border: colorStr,\n        highlight: {\n          background: colorStr,\n          border: colorStr,\n        },\n        hover: {\n          background: colorStr,\n          border: colorStr,\n        },\n      };\n    }\n  } else {\n    if (defaultColor) {\n      const color: FullColorObject = {\n        background: inputColor.background || defaultColor.background,\n        border: inputColor.border || defaultColor.border,\n        highlight: isString(inputColor.highlight)\n          ? {\n              border: inputColor.highlight,\n              background: inputColor.highlight,\n            }\n          : {\n              background:\n                (inputColor.highlight && inputColor.highlight.background) ||\n                defaultColor.highlight.background,\n              border:\n                (inputColor.highlight && inputColor.highlight.border) ||\n                defaultColor.highlight.border,\n            },\n        hover: isString(inputColor.hover)\n          ? {\n              border: inputColor.hover,\n              background: inputColor.hover,\n            }\n          : {\n              border:\n                (inputColor.hover && inputColor.hover.border) ||\n                defaultColor.hover.border,\n              background:\n                (inputColor.hover && inputColor.hover.background) ||\n                defaultColor.hover.background,\n            },\n      };\n      return color;\n    } else {\n      const color: ColorObject = {\n        background: inputColor.background || undefined,\n        border: inputColor.border || undefined,\n        highlight: isString(inputColor.highlight)\n          ? {\n              border: inputColor.highlight,\n              background: inputColor.highlight,\n            }\n          : {\n              background:\n                (inputColor.highlight && inputColor.highlight.background) ||\n                undefined,\n              border:\n                (inputColor.highlight && inputColor.highlight.border) ||\n                undefined,\n            },\n        hover: isString(inputColor.hover)\n          ? {\n              border: inputColor.hover,\n              background: inputColor.hover,\n            }\n          : {\n              border:\n                (inputColor.hover && inputColor.hover.border) || undefined,\n              background:\n                (inputColor.hover && inputColor.hover.background) || undefined,\n            },\n      };\n      return color;\n    }\n  }\n}\n\n/**\n * Convert RGB \\<0, 255\\> into HSV object.\n *\n * @remarks\n * {@link http://www.javascripter.net/faq/rgb2hsv.htm}\n *\n * @param red - Red channel.\n * @param green - Green channel.\n * @param blue - Blue channel.\n *\n * @returns HSV color object.\n */\nexport function RGBToHSV(red: number, green: number, blue: number): HSV {\n  red = red / 255;\n  green = green / 255;\n  blue = blue / 255;\n  const minRGB = Math.min(red, Math.min(green, blue));\n  const maxRGB = Math.max(red, Math.max(green, blue));\n\n  // Black-gray-white\n  if (minRGB === maxRGB) {\n    return { h: 0, s: 0, v: minRGB };\n  }\n\n  // Colors other than black-gray-white:\n  const d =\n    red === minRGB ? green - blue : blue === minRGB ? red - green : blue - red;\n  const h = red === minRGB ? 3 : blue === minRGB ? 1 : 5;\n  const hue = (60 * (h - d / (maxRGB - minRGB))) / 360;\n  const saturation = (maxRGB - minRGB) / maxRGB;\n  const value = maxRGB;\n  return { h: hue, s: saturation, v: value };\n}\n\ninterface CSSStyles {\n  [key: string]: string;\n}\nconst cssUtil = {\n  // split a string with css styles into an object with key/values\n  split(cssText: string): CSSStyles {\n    const styles: CSSStyles = {};\n\n    cssText.split(\";\").forEach((style): void => {\n      if (style.trim() != \"\") {\n        const parts = style.split(\":\");\n        const key = parts[0].trim();\n        const value = parts[1].trim();\n        styles[key] = value;\n      }\n    });\n\n    return styles;\n  },\n\n  // build a css text string from an object with key/values\n  join(styles: CSSStyles): string {\n    return Object.keys(styles)\n      .map(function (key): string {\n        return key + \": \" + styles[key];\n      })\n      .join(\"; \");\n  },\n};\n\n/**\n * Append a string with css styles to an element.\n *\n * @param element - The element that will receive new styles.\n * @param cssText - The styles to be appended.\n */\nexport function addCssText(element: HTMLElement, cssText: string): void {\n  const currentStyles = cssUtil.split(element.style.cssText);\n  const newStyles = cssUtil.split(cssText);\n  const styles = {\n    ...currentStyles,\n    ...newStyles,\n  };\n\n  element.style.cssText = cssUtil.join(styles);\n}\n\n/**\n * Remove a string with css styles from an element.\n *\n * @param element - The element from which styles should be removed.\n * @param cssText - The styles to be removed.\n */\nexport function removeCssText(element: HTMLElement, cssText: string): void {\n  const styles = cssUtil.split(element.style.cssText);\n  const removeStyles = cssUtil.split(cssText);\n\n  for (const key in removeStyles) {\n    if (Object.prototype.hasOwnProperty.call(removeStyles, key)) {\n      delete styles[key];\n    }\n  }\n\n  element.style.cssText = cssUtil.join(styles);\n}\n\n/**\n * Convert HSV \\<0, 1\\> into RGB color object.\n *\n * @remarks\n * {@link https://gist.github.com/mjijackson/5311256}\n *\n * @param h - Hue.\n * @param s - Saturation.\n * @param v - Value.\n *\n * @returns RGB color object.\n */\nexport function HSVToRGB(h: number, s: number, v: number): RGB {\n  let r: undefined | number;\n  let g: undefined | number;\n  let b: undefined | number;\n\n  const i = Math.floor(h * 6);\n  const f = h * 6 - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n\n  switch (i % 6) {\n    case 0:\n      (r = v), (g = t), (b = p);\n      break;\n    case 1:\n      (r = q), (g = v), (b = p);\n      break;\n    case 2:\n      (r = p), (g = v), (b = t);\n      break;\n    case 3:\n      (r = p), (g = q), (b = v);\n      break;\n    case 4:\n      (r = t), (g = p), (b = v);\n      break;\n    case 5:\n      (r = v), (g = p), (b = q);\n      break;\n  }\n\n  return {\n    r: Math.floor((r as number) * 255),\n    g: Math.floor((g as number) * 255),\n    b: Math.floor((b as number) * 255),\n  };\n}\n\n/**\n * Convert HSV \\<0, 1\\> into hex color string.\n *\n * @param h - Hue.\n * @param s - Saturation.\n * @param v - Value.\n *\n * @returns Hex color string.\n */\nexport function HSVToHex(h: number, s: number, v: number): string {\n  const rgb = HSVToRGB(h, s, v);\n  return RGBToHex(rgb.r, rgb.g, rgb.b);\n}\n\n/**\n * Convert hex color string into HSV \\<0, 1\\>.\n *\n * @param hex - Hex color string.\n *\n * @returns HSV color object.\n */\nexport function hexToHSV(hex: string): HSV {\n  const rgb = hexToRGB(hex);\n  if (!rgb) {\n    throw new TypeError(`'${hex}' is not a valid color.`);\n  }\n  return RGBToHSV(rgb.r, rgb.g, rgb.b);\n}\n\n/**\n * Validate hex color string.\n *\n * @param hex - Unknown string that may contain a color.\n *\n * @returns True if the string is valid, false otherwise.\n */\nexport function isValidHex(hex: string): boolean {\n  const isOk = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(hex);\n  return isOk;\n}\n\n/**\n * Validate RGB color string.\n *\n * @param rgb - Unknown string that may contain a color.\n *\n * @returns True if the string is valid, false otherwise.\n */\nexport function isValidRGB(rgb: string): boolean {\n  return rgbRE.test(rgb);\n}\n\n/**\n * Validate RGBA color string.\n *\n * @param rgba - Unknown string that may contain a color.\n *\n * @returns True if the string is valid, false otherwise.\n */\nexport function isValidRGBA(rgba: string): boolean {\n  return rgbaRE.test(rgba);\n}\n\n/**\n * This recursively redirects the prototype of JSON objects to the referenceObject.\n * This is used for default options.\n *\n * @param fields - Names of properties to be bridged.\n * @param referenceObject - The original object.\n *\n * @returns A new object inheriting from the referenceObject.\n */\nexport function selectiveBridgeObject<F extends string, V>(\n  fields: F[],\n  referenceObject: Record<F, V>\n): Record<F, V> | null {\n  if (referenceObject !== null && typeof referenceObject === \"object\") {\n    // !!! typeof null === 'object'\n    const objectTo = Object.create(referenceObject);\n    for (let i = 0; i < fields.length; i++) {\n      if (Object.prototype.hasOwnProperty.call(referenceObject, fields[i])) {\n        if (typeof referenceObject[fields[i]] == \"object\") {\n          objectTo[fields[i]] = bridgeObject(referenceObject[fields[i]]);\n        }\n      }\n    }\n    return objectTo;\n  } else {\n    return null;\n  }\n}\n\nexport function bridgeObject<T extends object>(referenceObject: T): T;\nexport function bridgeObject<T>(referenceObject: T): null;\n/**\n * This recursively redirects the prototype of JSON objects to the referenceObject.\n * This is used for default options.\n *\n * @param referenceObject - The original object.\n *\n * @returns The Element if the referenceObject is an Element, or a new object inheriting from the referenceObject.\n */\nexport function bridgeObject<T extends object | null>(\n  referenceObject: T\n): T | null {\n  if (referenceObject === null || typeof referenceObject !== \"object\") {\n    return null;\n  }\n\n  if (referenceObject instanceof Element) {\n    // Avoid bridging DOM objects\n    return referenceObject;\n  }\n\n  const objectTo = Object.create(referenceObject);\n  for (const i in referenceObject) {\n    if (Object.prototype.hasOwnProperty.call(referenceObject, i)) {\n      if (typeof (referenceObject as any)[i] == \"object\") {\n        objectTo[i] = bridgeObject((referenceObject as any)[i]);\n      }\n    }\n  }\n\n  return objectTo;\n}\n\n/**\n * This method provides a stable sort implementation, very fast for presorted data.\n *\n * @param a - The array to be sorted (in-place).\n * @param compare - An order comparator.\n *\n * @returns The argument a.\n */\nexport function insertSort<T>(a: T[], compare: (a: T, b: T) => number): T[] {\n  for (let i = 0; i < a.length; i++) {\n    const k = a[i];\n    let j;\n    for (j = i; j > 0 && compare(k, a[j - 1]) < 0; j--) {\n      a[j] = a[j - 1];\n    }\n    a[j] = k;\n  }\n  return a;\n}\n\n/**\n * This is used to set the options of subobjects in the options object.\n *\n * A requirement of these subobjects is that they have an 'enabled' element\n * which is optional for the user but mandatory for the program.\n *\n * The added value here of the merge is that option 'enabled' is set as required.\n *\n * @param mergeTarget - Either this.options or the options used for the groups.\n * @param options - Options.\n * @param option - Option key in the options argument.\n * @param globalOptions - Global options, passed in to determine value of option 'enabled'.\n */\nexport function mergeOptions(\n  mergeTarget: any,\n  options: any,\n  option: string,\n  globalOptions: any = {}\n): void {\n  // Local helpers\n  const isPresent = function (obj: any): boolean {\n    return obj !== null && obj !== undefined;\n  };\n\n  const isObject = function (obj: unknown): boolean {\n    return obj !== null && typeof obj === \"object\";\n  };\n\n  // https://stackoverflow.com/a/34491287/1223531\n  const isEmpty = function (obj: object): obj is {} {\n    for (const x in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, x)) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  // Guards\n  if (!isObject(mergeTarget)) {\n    throw new Error(\"Parameter mergeTarget must be an object\");\n  }\n\n  if (!isObject(options)) {\n    throw new Error(\"Parameter options must be an object\");\n  }\n\n  if (!isPresent(option)) {\n    throw new Error(\"Parameter option must have a value\");\n  }\n\n  if (!isObject(globalOptions)) {\n    throw new Error(\"Parameter globalOptions must be an object\");\n  }\n\n  //\n  // Actual merge routine, separated from main logic\n  // Only a single level of options is merged. Deeper levels are ref'd. This may actually be an issue.\n  //\n  const doMerge = function (target: any, options: any, option: string): void {\n    if (!isObject(target[option])) {\n      target[option] = {};\n    }\n\n    const src = options[option];\n    const dst = target[option];\n    for (const prop in src) {\n      if (Object.prototype.hasOwnProperty.call(src, prop)) {\n        dst[prop] = src[prop];\n      }\n    }\n  };\n\n  // Local initialization\n  const srcOption = options[option];\n  const globalPassed = isObject(globalOptions) && !isEmpty(globalOptions);\n  const globalOption = globalPassed ? globalOptions[option] : undefined;\n  const globalEnabled = globalOption ? globalOption.enabled : undefined;\n\n  /////////////////////////////////////////\n  // Main routine\n  /////////////////////////////////////////\n  if (srcOption === undefined) {\n    return; // Nothing to do\n  }\n\n  if (typeof srcOption === \"boolean\") {\n    if (!isObject(mergeTarget[option])) {\n      mergeTarget[option] = {};\n    }\n\n    mergeTarget[option].enabled = srcOption;\n    return;\n  }\n\n  if (srcOption === null && !isObject(mergeTarget[option])) {\n    // If possible, explicit copy from globals\n    if (isPresent(globalOption)) {\n      mergeTarget[option] = Object.create(globalOption);\n    } else {\n      return; // Nothing to do\n    }\n  }\n\n  if (!isObject(srcOption)) {\n    return;\n  }\n\n  //\n  // Ensure that 'enabled' is properly set. It is required internally\n  // Note that the value from options will always overwrite the existing value\n  //\n  let enabled = true; // default value\n\n  if (srcOption.enabled !== undefined) {\n    enabled = srcOption.enabled;\n  } else {\n    // Take from globals, if present\n    if (globalEnabled !== undefined) {\n      enabled = globalOption.enabled;\n    }\n  }\n\n  doMerge(mergeTarget, options, option);\n  mergeTarget[option].enabled = enabled;\n}\n\nexport function binarySearchCustom<\n  O extends object,\n  K1 extends keyof O,\n  K2 extends keyof O[K1]\n>(\n  orderedItems: O[],\n  comparator: (v: O[K1][K2]) => -1 | 0 | 1,\n  field: K1,\n  field2: K2\n): number;\nexport function binarySearchCustom<O extends object, K1 extends keyof O>(\n  orderedItems: O[],\n  comparator: (v: O[K1]) => -1 | 0 | 1,\n  field: K1\n): number;\n/**\n * This function does a binary search for a visible item in a sorted list. If we find a visible item, the code that uses\n * this function will then iterate in both directions over this sorted list to find all visible items.\n *\n * @param orderedItems - Items ordered by start.\n * @param comparator - -1 is lower, 0 is equal, 1 is higher.\n * @param field - Property name on an item (That is item[field]).\n * @param field2 - Second property name on an item (That is item[field][field2]).\n *\n * @returns Index of the found item or -1 if nothing was found.\n */\nexport function binarySearchCustom(\n  orderedItems: any[],\n  comparator: (v: unknown) => -1 | 0 | 1,\n  field: string,\n  field2?: string\n): number {\n  const maxIterations = 10000;\n  let iteration = 0;\n  let low = 0;\n  let high = orderedItems.length - 1;\n\n  while (low <= high && iteration < maxIterations) {\n    const middle = Math.floor((low + high) / 2);\n\n    const item = orderedItems[middle];\n    const value = field2 === undefined ? item[field] : item[field][field2];\n\n    const searchResult = comparator(value);\n    if (searchResult == 0) {\n      // jihaa, found a visible item!\n      return middle;\n    } else if (searchResult == -1) {\n      // it is too small --> increase low\n      low = middle + 1;\n    } else {\n      // it is too big --> decrease high\n      high = middle - 1;\n    }\n\n    iteration++;\n  }\n\n  return -1;\n}\n\n/**\n * This function does a binary search for a specific value in a sorted array.\n * If it does not exist but is in between of two values, we return either the\n * one before or the one after, depending on user input If it is found, we\n * return the index, else -1.\n *\n * @param orderedItems - Sorted array.\n * @param target - The searched value.\n * @param field - Name of the property in items to be searched.\n * @param sidePreference - If the target is between two values, should the index of the before or the after be returned?\n * @param comparator - An optional comparator, returning -1, 0, 1 for \\<, ===, \\>.\n *\n * @returns The index of found value or -1 if nothing was found.\n */\nexport function binarySearchValue<T extends string>(\n  orderedItems: { [K in T]: number }[],\n  target: number,\n  field: T,\n  sidePreference: \"before\" | \"after\",\n  comparator?: (a: number, b: number) => -1 | 0 | 1\n): number {\n  const maxIterations = 10000;\n  let iteration = 0;\n  let low = 0;\n  let high = orderedItems.length - 1;\n  let prevValue;\n  let value;\n  let nextValue;\n  let middle;\n\n  comparator =\n    comparator != undefined\n      ? comparator\n      : function (a: number, b: number): -1 | 0 | 1 {\n          return a == b ? 0 : a < b ? -1 : 1;\n        };\n\n  while (low <= high && iteration < maxIterations) {\n    // get a new guess\n    middle = Math.floor(0.5 * (high + low));\n    prevValue = orderedItems[Math.max(0, middle - 1)][field];\n    value = orderedItems[middle][field];\n    nextValue =\n      orderedItems[Math.min(orderedItems.length - 1, middle + 1)][field];\n\n    if (comparator(value, target) == 0) {\n      // we found the target\n      return middle;\n    } else if (\n      comparator(prevValue, target) < 0 &&\n      comparator(value, target) > 0\n    ) {\n      // target is in between of the previous and the current\n      return sidePreference == \"before\" ? Math.max(0, middle - 1) : middle;\n    } else if (\n      comparator(value, target) < 0 &&\n      comparator(nextValue, target) > 0\n    ) {\n      // target is in between of the current and the next\n      return sidePreference == \"before\"\n        ? middle\n        : Math.min(orderedItems.length - 1, middle + 1);\n    } else {\n      // didnt find the target, we need to change our boundaries.\n      if (comparator(value, target) < 0) {\n        // it is too small --> increase low\n        low = middle + 1;\n      } else {\n        // it is too big --> decrease high\n        high = middle - 1;\n      }\n    }\n    iteration++;\n  }\n\n  // didnt find anything. Return -1.\n  return -1;\n}\n\n/*\n * Easing Functions.\n * Only considering the t value for the range [0, 1] => [0, 1].\n *\n * Inspiration: from http://gizma.com/easing/\n * https://gist.github.com/gre/1650294\n */\nexport const easingFunctions = {\n  /**\n   * Provides no easing and no acceleration.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  linear(t: number): number {\n    return t;\n  },\n\n  /**\n   * Accelerate from zero velocity.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeInQuad(t: number): number {\n    return t * t;\n  },\n\n  /**\n   * Decelerate to zero velocity.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeOutQuad(t: number): number {\n    return t * (2 - t);\n  },\n\n  /**\n   * Accelerate until halfway, then decelerate.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeInOutQuad(t: number): number {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  },\n\n  /**\n   * Accelerate from zero velocity.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeInCubic(t: number): number {\n    return t * t * t;\n  },\n\n  /**\n   * Decelerate to zero velocity.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeOutCubic(t: number): number {\n    return --t * t * t + 1;\n  },\n\n  /**\n   * Accelerate until halfway, then decelerate.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeInOutCubic(t: number): number {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n  },\n\n  /**\n   * Accelerate from zero velocity.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeInQuart(t: number): number {\n    return t * t * t * t;\n  },\n\n  /**\n   * Decelerate to zero velocity.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeOutQuart(t: number): number {\n    return 1 - --t * t * t * t;\n  },\n\n  /**\n   * Accelerate until halfway, then decelerate.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeInOutQuart(t: number): number {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n  },\n\n  /**\n   * Accelerate from zero velocity.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeInQuint(t: number): number {\n    return t * t * t * t * t;\n  },\n\n  /**\n   * Decelerate to zero velocity.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeOutQuint(t: number): number {\n    return 1 + --t * t * t * t * t;\n  },\n\n  /**\n   * Accelerate until halfway, then decelerate.\n   *\n   * @param t - Time.\n   *\n   * @returns Value at time t.\n   */\n  easeInOutQuint(t: number): number {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n  },\n};\n\n/**\n * Experimentaly compute the width of the scrollbar for this browser.\n *\n * @returns The width in pixels.\n */\nexport function getScrollBarWidth(): number {\n  const inner = document.createElement(\"p\");\n  inner.style.width = \"100%\";\n  inner.style.height = \"200px\";\n\n  const outer = document.createElement(\"div\");\n  outer.style.position = \"absolute\";\n  outer.style.top = \"0px\";\n  outer.style.left = \"0px\";\n  outer.style.visibility = \"hidden\";\n  outer.style.width = \"200px\";\n  outer.style.height = \"150px\";\n  outer.style.overflow = \"hidden\";\n  outer.appendChild(inner);\n\n  document.body.appendChild(outer);\n  const w1 = inner.offsetWidth;\n  outer.style.overflow = \"scroll\";\n  let w2 = inner.offsetWidth;\n  if (w1 == w2) {\n    w2 = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n\n  return w1 - w2;\n}\n\n// @TODO: This doesn't work properly.\n// It works only for single property objects,\n// otherwise it combines all of the types in a union.\n// export function topMost<K1 extends string, V1> (\n//   pile: Record<K1, undefined | V1>[],\n//   accessors: K1 | [K1]\n// ): undefined | V1\n// export function topMost<K1 extends string, K2 extends string, V1, V2> (\n//   pile: Record<K1, undefined | V1 | Record<K2, undefined | V2>>[],\n//   accessors: [K1, K2]\n// ): undefined | V1 | V2\n// export function topMost<K1 extends string, K2 extends string, K3 extends string, V1, V2, V3> (\n//   pile: Record<K1, undefined | V1 | Record<K2, undefined | V2 | Record<K3, undefined | V3>>>[],\n//   accessors: [K1, K2, K3]\n// ): undefined | V1 | V2 | V3\n/**\n * Get the top most property value from a pile of objects.\n *\n * @param pile - Array of objects, no required format.\n * @param accessors - Array of property names.\n * For example `object['foo']['bar']` → `['foo', 'bar']`.\n *\n * @returns Value of the property with given accessors path from the first pile item where it's not undefined.\n */\nexport function topMost(pile: any, accessors: any): any {\n  let candidate;\n  if (!Array.isArray(accessors)) {\n    accessors = [accessors];\n  }\n  for (const member of pile) {\n    if (member) {\n      candidate = member[accessors[0]];\n      for (let i = 1; i < accessors.length; i++) {\n        if (candidate) {\n          candidate = candidate[accessors[i]];\n        }\n      }\n      if (typeof candidate !== \"undefined\") {\n        break;\n      }\n    }\n  }\n  return candidate;\n}\n"],"names":[],"mappings":"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"}